
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.0   Copyright 1985-2019 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     Special Edition                  College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user Stata perpetual license:
       Serial number:  401606204723
         Licensed to:  Nik Lomax
                       The University of Leeds

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  Maximum number of variables is set to 5000; see help set_maxvar.

. do "reshape_long.do" 

. quietly include ../../../fem_env.do

. 
. local in_file : env INPUT

. local out_file : env OUTPUT

. local scr : env SCENARIO

. 
. *use ../../../input_data/H_ELSA.dta, clear
. use $outdata/H_ELSA.dta, clear

. 
. global firstwave 1

. global lastwave 7

. 
. local seed 5000

. 
. /* Variables from Harmonized ELSA:
> 
> Section A: Demographics, Identifiers, and Weights::
> Person unique ID; CoupleID number; Spouse unique ID;
> Interview status (morbidity); Stratification variable; 
> Clustering variable; Person-level cross-sectional weight; 
> Individual interview year; Individual interview month; Birth year; 
> Death year; Age at interview (years); Gender; Education (categ).
> 
> Section B: Health::
> ADLs. Some difficulty:
> Walking across room; Dressing; Bathing/Shower; Eating;
> Getting in/out of bed; Using the toilet.
> 
> IADLs. Some difficulty:
> Using a map; Using a telephone; Managing money; 
> Taking Medications; Shopping for groceries;
> Preparing a hot meal; Doing work around the house or garden.
> 
> Doctor diagnosed health problems. Ever have condition:
> High blood pressure; Diabetes; Cancer; Lung Disease;
> Heart problems; Stroke; Psychological problems; 
> Arthritis, Asthma, Parkinson's disease.
> 
> Height, Weight, BMI:
> Height in meters; Weight in kilograms; BMI
> 
> Health Behaviours:
> Smoke ever; Smoke now; How many cigs per day (avg);
> Exercise(vigorous, moderate, light); Drinking ever;
> # days/week drinks; # drinks/week.
> 
> Whether Health Limits Work.
> 
> Section E Financial and Housing Wealth::
> Net Value of Non-Housing Financial Wealth;
> 
> Section F: Income and Consumption::
> Individual employment earnings; Public pension income;
> 
> */
. 
. * Dropping the longitudinal sample weight
. drop r*lwtresp

. 
. * Keep these variables from the harmonized ELSA
. #d ;
delimiter now ;
. keep idauniq
> s*idauniq
> h*coupid
> r*iwstat
> r*strat 
> raclust
> r*cwtresp
> r*iwindy
> r*iwindm
> rabyear
> radyear
> r*agey
> ragender
> raeduc_e
> raeducl
> r*walkra
> r*dressa
> r*batha
> r*eata
> r*beda
> r*toilta
> r*mapa
> r*phonea
> r*moneya
> r*medsa 
> r*shopa
> r*mealsa
> r*housewka
> r*hibpe
> r*diabe 
> r*cancre 
> r*lunge
> r*hearte
> r*stroke 
> r*psyche
> r*arthre
> r*bmi 
> r*smokev
> r*smoken
> r*smokef
> r*work
> r*hlthlm
> r*arthre
> r*psyche
> r*asthmae
> r*parkine
> r*retemp
> r*retage
> r*ipubpen
> r*itearn
> h*atotf
> r*vgactx_e
> r*mdactx_e
> r*ltactx_e
> r*drink
> r*drinkd_e
> r*drinkwn_e
> ;

. #d cr
delimiter now cr
. 
. * Rename h*coupid to a more useful form
. forvalues wv = $firstwave/$lastwave {
  2.     rename h`wv'coupid r`wv'hhid
  3.     rename h`wv'atotf r`wv'atotf
  4. }

. 
. * Rename variables to make reshape easier and have names consistent with US F
> EM
. * Respondent?
. #d ;
delimiter now ;
. foreach var in 
>     iwstat
>     strat
>     cwtresp
>     iwindy
>     iwindm
>     agey
>     walkra
>     dressa
>     batha
>     eata
>     beda
>     toilta
>     mapa
>     phonea
>     moneya
>     medsa
>     shopa
>     mealsa
>     housewka
>     hibpe
>     diabe 
>     cancre 
>     lunge
>     hearte
>     stroke 
>     psyche
>     arthre
>     bmi
>     smokev
>     smoken
>     smokef
>     hhid
>     work
>     hlthlm
>     asthmae
>     parkine
>     retemp
>     retage
>     ipubpen
>     itearn
>     atotf
>     vgactx_e
>     mdactx_e
>     ltactx_e
>     drink
>     drinkd_e
>     drinkwn_e
>       { ;
  2.             forvalues i = $firstwave(1)$lastwave { ;
  3.                 cap confirm var r`i'`var';
  4.                 if !_rc{;
  5.                     ren r`i'`var' `var'`i';
  6.                 };
  7.             };
  8.     } ;

. #d cr
delimiter now cr
. 
. * Reshape data from wide to long
. #d ;
delimiter now ;
. reshape long iwstat strat cwtresp iwindy iwindm agey walkra dressa batha eata
>  beda 
>     toilta mapa phonea moneya medsa shopa mealsa housewka hibpe diabe cancre 
> lunge 
>     hearte stroke psyche arthre bmi smokev smoken smokef hhid work hlthlm
>     asthmae parkine itearn ipubpen retemp retage atotf vgactx_e mdactx_e ltac
> tx_e
>     drink drinkd_e drinkwn_e
> , i(idauniq) j(wave)
> ;
(note: j = 1 2 3 4 5 6 7)
(note: bmi1 not found)
(note: hlthlm1 not found)
(note: drinkd_e1 not found)
(note: drinkwn_e1 not found)
(note: cwtresp2 not found)
(note: drinkwn_e2 not found)
(note: strat3 not found)
(note: bmi3 not found)
(note: drinkwn_e3 not found)
(note: strat4 not found)
(note: strat5 not found)
(note: bmi5 not found)
(note: strat6 not found)
(note: strat7 not found)
(note: bmi7 not found)

Data                               wide   ->   long
-----------------------------------------------------------------------------
Number of obs.                    18489   ->  129423
Number of variables                 340   ->      74
j variable (7 values)                     ->   wave
xij variables:
            iwstat1 iwstat2 ... iwstat7   ->   iwstat
               strat1 strat2 ... strat7   ->   strat
         cwtresp1 cwtresp2 ... cwtresp7   ->   cwtresp
            iwindy1 iwindy2 ... iwindy7   ->   iwindy
            iwindm1 iwindm2 ... iwindm7   ->   iwindm
                  agey1 agey2 ... agey7   ->   agey
            walkra1 walkra2 ... walkra7   ->   walkra
            dressa1 dressa2 ... dressa7   ->   dressa
               batha1 batha2 ... batha7   ->   batha
                  eata1 eata2 ... eata7   ->   eata
                  beda1 beda2 ... beda7   ->   beda
            toilta1 toilta2 ... toilta7   ->   toilta
                  mapa1 mapa2 ... mapa7   ->   mapa
            phonea1 phonea2 ... phonea7   ->   phonea
            moneya1 moneya2 ... moneya7   ->   moneya
               medsa1 medsa2 ... medsa7   ->   medsa
               shopa1 shopa2 ... shopa7   ->   shopa
            mealsa1 mealsa2 ... mealsa7   ->   mealsa
      housewka1 housewka2 ... housewka7   ->   housewka
               hibpe1 hibpe2 ... hibpe7   ->   hibpe
               diabe1 diabe2 ... diabe7   ->   diabe
            cancre1 cancre2 ... cancre7   ->   cancre
               lunge1 lunge2 ... lunge7   ->   lunge
            hearte1 hearte2 ... hearte7   ->   hearte
            stroke1 stroke2 ... stroke7   ->   stroke
            psyche1 psyche2 ... psyche7   ->   psyche
            arthre1 arthre2 ... arthre7   ->   arthre
                     bmi1 bmi2 ... bmi7   ->   bmi
            smokev1 smokev2 ... smokev7   ->   smokev
            smoken1 smoken2 ... smoken7   ->   smoken
            smokef1 smokef2 ... smokef7   ->   smokef
                  hhid1 hhid2 ... hhid7   ->   hhid
                  work1 work2 ... work7   ->   work
            hlthlm1 hlthlm2 ... hlthlm7   ->   hlthlm
         asthmae1 asthmae2 ... asthmae7   ->   asthmae
         parkine1 parkine2 ... parkine7   ->   parkine
            itearn1 itearn2 ... itearn7   ->   itearn
         ipubpen1 ipubpen2 ... ipubpen7   ->   ipubpen
            retemp1 retemp2 ... retemp7   ->   retemp
            retage1 retage2 ... retage7   ->   retage
               atotf1 atotf2 ... atotf7   ->   atotf
      vgactx_e1 vgactx_e2 ... vgactx_e7   ->   vgactx_e
      mdactx_e1 mdactx_e2 ... mdactx_e7   ->   mdactx_e
      ltactx_e1 ltactx_e2 ... ltactx_e7   ->   ltactx_e
               drink1 drink2 ... drink7   ->   drink
      drinkd_e1 drinkd_e2 ... drinkd_e7   ->   drinkd_e
   drinkwn_e1 drinkwn_e2 ... drinkwn_e7   ->   drinkwn_e
-----------------------------------------------------------------------------

.  #d cr
delimiter now cr
. label variable iwindy "Interview Year"

. label variable iwindm "Interview Month"

. label variable agey "Age at Interview (yrs)"

. label variable walkra "Difficulty walking across room"

. label variable dressa "Difficulty dressing"

. label variable batha "Difficulty bathing/showering"

. label variable eata "Difficulty eating"

. label variable beda "Difficulty getting in/out of bed"

. label variable toilta "Difficulty using the toilet"

. label variable mapa "Difficulty using a map"

. label variable phonea "Difficulty using a telephone"

. label variable moneya "Difficulty  managing money"

. label variable medsa "Difficulty taking medications"

. label variable shopa "Difficulty shopping for groceries"

. label variable mealsa "Difficulty preparing a hot meal"

. label variable housewka "Difficulty doing housework/gardening"

. label variable hibpe "Hypertension ever"

. label variable diabe "Diabetes ever"

. label variable cancre "Cancer ever"

. label variable lunge "Lung disease ever"

. label variable hearte "Heart disease ever"

. label variable stroke "Stroke ever"

. label variable psyche "Pyschological problems ever"

. label variable arthre "Arthritis ever"

. label variable bmi "BMI"

. label variable smokev "Smoke ever"

. label variable smoken "Smoke now"

. label variable smokef "Average cigs/day"

. label variable hhid "Household ID"

. label variable work "Working for pay"

. label variable hlthlm "Health limits work"

. label variable itearn "Individual employment earnings (annual, after tax)"

. label variable ipubpen "Public pension income (all types)"

. label variable asthmae "Asthma ever"

. label variable parkine "Parkinsons disease ever"

. label variable retemp "Considers self retired"

. label variable retage "Retirement age"

. label variable atotf "Net Value of Non-Housing Financial Wealth"

. label variable vgactx_e "Number of times done vigorous exercise per week"

. label variable mdactx_e "Number of times done moderate exercise per week"

. label variable ltactx_e "Number of times done light exercise per week"

. label variable drink "Drinks at all"

. label variable drinkd_e "# Days/week has a drink"

. label variable drinkwn_e "# drinks/week"

. 
. *** Recode Variables ***
. /*
> * Recode the education variable (HRS has 3 tiers of eductation, )
> recode raeduc_e (1 = 1) (3/4 = 2) (5 = 3), gen(educ_h)
> label variable educ_h "Education Level"
> label drop educharm
> label define educ_h 1 "1.No Qualifications" 2 "2.Less than University degree"
>  3 "3.University degree or higher"
> label values educ_h educ_h
> drop raeduc_e
> */
. 
. * Use harmonised education var
. gen educ = raeducl
(24,724 missing values generated)

. label variable educ "Harmonised Education Level"

. label define educ 1 "1.Less than Secondary" 2 "2.Upper Secondary and Vocation
> al" 3 "3.Tertiary"

. label values educ educ

. drop raeducl

. 
. codebook educ

-------------------------------------------------------------------------------
educ                                                 Harmonised Education Level
-------------------------------------------------------------------------------

                  type:  numeric (float)
                 label:  educ

                 range:  [1,3]                        units:  1
         unique values:  3                        missing .:  0/129,423
       unique mv codes:  5                       missing .*:  24,724/129,423

            tabulation:  Freq.   Numeric  Label
                        43,827         1  1.Less than Secondary
                        46,270         2  2.Upper Secondary and Vocational
                        14,602         3  3.Tertiary
                           245        .d  
                        12,558        .h  
                         4,627        .m  
                         7,105        .o  
                           189        .r  

. 
. * Label males
. gen male = (ragender == 1) if !missing(ragender)

. label variable male "Male"

. 
. * Find if dead with iwstat var
. gen died = (iwstat == 5) if !missing(iwstat)

. * Keep only those alive or recently deceased
. count
  129,423

. tab iwstat, m

                   iwstat |      Freq.     Percent        Cum.
--------------------------+-----------------------------------
                  0.inap. |     20,307       15.69       15.69
            1.resp, alive |     72,889       56.32       72.01
              4.nr, alive |      2,609        2.02       74.02
       5.nr, died this wv |      2,757        2.13       76.15
       6.nr, died prev wv |      8,177        6.32       82.47
  7.nr, dropped from samp |         25        0.02       82.49
9.nr, dk if alive or died |     22,659       17.51      100.00
--------------------------+-----------------------------------
                    Total |    129,423      100.00

. /* Dropping the 0 (inap.? Unknown code) 6 (previously deceased), 7 (dropped f
> rom sample) 
> and 9 (non-response, unkown if dead or alive) */
. keep if inlist(iwstat,1,4,5)
(51,168 observations deleted)

. count
  78,255

. 
. * FEM uses hhidpn as the person ID
. gen hhidpn = idauniq

. replace hhid = hhidpn
variable hhid was int now long
(78,255 real changes made)

. 
. * generate birth year and age variable for naming conventions
. gen rbyr = rabyear
(1 missing value generated)

. gen age = agey
(5,363 missing values generated)

. 
. * Year variable derived from wave (wave 1: 2002-3, wave 2: 2004-5...)
. gen year = 2000 + wave*2

. 
. * No birth month in ELSA data (unlike HRS, KLoSA) so cannot calculate exact a
> ge
. * Therefore keep agey as age variable (in years)
. 
. * Label cross-sectional sampling weight var
. label variable cwtresp "Cross-Sectional sampling weight"

. 
. * ADL/IADL
. egen adlcount = rowtotal(walkra dressa batha eata beda toilta)

. egen iadlcount = rowtotal(mapa phonea moneya medsa shopa mealsa housewka)

. recode adlcount (0=1) (1=2) (2=3) (3/7 = 4), gen(adlstat)
(77282 differences between adlcount and adlstat)

. recode adlcount (0=0) (1/5 = 1), gen(anyadl)
(6444 differences between adlcount and anyadl)

. recode iadlcount (0=1) (1=2) (2/7=3), gen(iadlstat)
(76359 differences between iadlcount and iadlstat)

. recode iadlcount (0=0) (1/5=1), gen(anyiadl)
(6755 differences between iadlcount and anyiadl)

. label define adlstat 1 "No ADLs" 2 "1 ADL" 3 "2 ADLs" 4 "3 or more ADLs"

. label values adlstat adlstat

. label define anyadl 0 "No ADLs" 1 "1 or more ADL" 

. label values anyadl anyadl

. label define iadlstat 1 "No IADLs" 2 "1 IADL" 3 "2 or more IADLs"

. label values iadlstat iadlstat

. label define anyiadl 0 "No IADLs" 1 "1 or more IADL" 

. label values anyiadl anyiadl

. 
. gen adl1 = adlstat==2 if !missing(adlstat)

. gen adl2 = adlstat==3 if !missing(adlstat)

. gen adl3p = adlstat==4 if !missing(adlstat)

. 
. gen iadl1 = iadlstat==2 if !missing(iadlstat)

. gen iadl2p = iadlstat==3 if !missing(iadlstat)

. 
. * Generate indicator variable for moderate exercise.
. * If exercise once a week or more, indicator has value of 1
. * Indicator == 0 if exercise less than once a week.
. * Organising var like this so able to run interventions
. gen modex_reg = 0

. replace modex_reg = 1 if mdactx_e==2 | mdactx_e==3
(53,761 real changes made)

. replace modex_reg = . if missing(mdactx_e)
(5,725 real changes made, 5,725 to missing)

. label variable modex_reg "Moderate exercise 1+ times per week"

. 
. * Handle missing bmi values
. bys hhidpn: ipolate bmi wave, gen(bmi_ipolate) epolate
(29086 missing values generated)

. replace bmi = bmi_ipolate if missing(bmi)
(32,840 real changes made, 6,851 to missing)

. drop bmi_ipolate

. 
. * log(bmi)
. gen logbmi = log(bmi) if !missing(bmi)
(29,086 missing values generated)

. 
. * Handle weird smoking status (smoke now but not smoke ever, nonsensical)
. count if smokev==0 & smoken==1
  6

. replace smokev = 1 if smoken==1 & smokev==0
(6 real changes made)

. 
. *Categorical smoking variable
. gen smkstat = 1 if smokev == 0 & smoken == 0
(51,193 missing values generated)

. replace smkstat = 2 if smokev == 1 & smoken == 0
(34,383 real changes made)

. replace smkstat = 3 if smoken == 1
(10,378 real changes made)

. label define smkstat 1 "Never smoked" 2 "Former smoker" 3 "Current smoker"

. label values smkstat smkstat

. 
. *** Generate lagged variables ***
. * xtset tells stata data is panel data (i.e. longitudinal)
. xtset hhidpn wave
       panel variable:  hhidpn (unbalanced)
        time variable:  wave, 1 to 7, but with gaps
                delta:  1 unit

. * Make sure that smokev is an absorbing state
. replace smokev = 1 if L.smokev == 1 & smokev == 0
(42 real changes made)

. * L.***, L is lag operator; can use L2 for 2 wave prior also
. * can use this as xtset tells stata that data is panel data
. 
. #d ;
delimiter now ;
. foreach var in
>     iwstat
>     agey
>     hibpe
>     diabe
>     cancre
>     lunge
>     hearte
>     stroke
>     psyche
>     arthre
>     bmi
>     logbmi
>     smokev
>     smoken
>     died
>     adlcount
>     adlstat
>     anyadl
>     iadlcount
>     iadlstat
>     anyiadl
>     smkstat
>     educ
>     work
>     hlthlm
>     asthmae
>     parkine
>     retemp
>     retage
>     ipubpen
>     atotf
>     itearn
>     vgactx_e
>     mdactx_e
>     ltactx_e
>     drink
>     drinkd_e
>     drinkwn_e
>     modex_reg
>     {;
  2.         gen l2`var' = L.`var';
  3.     };
(20,655 missing values generated)
(22,794 missing values generated)
(22,806 missing values generated)
(22,806 missing values generated)
(22,806 missing values generated)
(22,806 missing values generated)
(22,806 missing values generated)
(22,806 missing values generated)
(22,806 missing values generated)
(22,807 missing values generated)
(38,145 missing values generated)
(38,145 missing values generated)
(23,303 missing values generated)
(23,353 missing values generated)
(20,655 missing values generated)
(20,655 missing values generated)
(20,655 missing values generated)
(20,655 missing values generated)
(20,655 missing values generated)
(20,655 missing values generated)
(20,655 missing values generated)
(23,470 missing values generated)
(29,030 missing values generated)
(22,812 missing values generated)
(34,743 missing values generated)
(22,806 missing values generated)
(22,824 missing values generated)
(22,816 missing values generated)
(47,063 missing values generated)
(23,245 missing values generated)
(23,871 missing values generated)
(22,995 missing values generated)
(23,069 missing values generated)
(23,074 missing values generated)
(23,068 missing values generated)
(29,519 missing values generated)
(40,288 missing values generated)
(54,219 missing values generated)
(23,074 missing values generated)

. ;
. #d cr
delimiter now cr
. 
. * Handle l2age problems
. gen l2age = l2agey
(22,794 missing values generated)

. 
. *** Imputation Section ***
. * Be aware of what this section is doing, particularly for missing cases!
. * We want to assess how many people are missing and being assigned mean value
>  on
. * lines 289-293
. 
. * Set lag to current if missing
. replace l2logbmi = logbmi if missing(l2logbmi) & !missing(logbmi)
(12,653 real changes made)

. * Set current to lag if missing
. replace logbmi = l2logbmi if !missing(l2logbmi) & missing(logbmi)
(3,594 real changes made)

. * Set to mean if still missing
. quietly sum logbmi

. replace logbmi = r(mean) if missing(logbmi)
(25,492 real changes made)

. quietly sum l2logbmi

. replace l2logbmi = r(mean) if missing(l2logbmi)
(25,492 real changes made)

. 
. * Create any_adl and any_iadl
. gen any_adl = 1 if adlcount > 0
(64,558 missing values generated)

. replace any_adl = 0 if adlcount == 0
(64,558 real changes made)

. gen any_iadl = 1 if iadlcount > 0
(63,437 missing values generated)

. replace any_iadl = 0 if iadlcount == 0
(63,437 real changes made)

. 
. * Handle missing smkstat data
. replace smkstat = l2smkstat if missing(smkstat)
(3,329 real changes made)

. replace l2smkstat = smkstat if missing(l2smkstat)
(20,367 real changes made)

. 
. gen smoke_start = 1 if l2smoken == 0 & smoken == 1
(77,755 missing values generated)

. replace smoke_start = 0 if l2smoken == 0 & smoken == 0
(43,710 real changes made)

. gen smoke_stop = 1 if l2smoken == 1 & smoken == 0
(77,058 missing values generated)

. replace smoke_stop = 0 if l2smoken == 1 & smoken == 1
(6,175 real changes made)

. 
. 
. * Impute education var using hotdeck method
. * First replace missing value codes with '.'
. replace educ = . if missing(educ)
(12,211 real changes made, 12,211 to missing)

. * Run hotdeck algorithm and impute missing data
. hotdeck educ using ELSA_educ_imp, store seed(`seed') keep(_all) impute(1)
Seed is set as  5000
DELETING all matrices....

Missing Patterns
----------------

Table of the Missing data patterns 
 * signifies missing and - is not missing

Varlist order: educ

    Missing |
    pattern |      Freq.     Percent        Cum.
------------+-----------------------------------
          * |     12,211       15.60       15.60
          - |     66,044       84.40      100.00
------------+-----------------------------------
      Total |     78,255      100.00
WARNING: When the <command> option is not selected 
then no analysis is performed on the imputed datasets


. * Load in imputed dataset
. use ELSA_educ_imp1.dta, clear

. 
. * Create separate variables for hsless (less than secondary school) and colle
> ge (university)
. gen hsless = (educ == 1)

. gen college = (educ == 3)

. 
. * Preferably would use PMM here but going to hotdeck for the time being
. replace drinkd_e = . if missing(drinkd_e)
(10,507 real changes made, 10,507 to missing)

. hotdeck drinkd_e using ELSA_drinkd_e_imp, store seed(`seed') keep(_all) imput
> e(1)
Seed is set as  5000
DELETING all matrices....

Missing Patterns
----------------

Table of the Missing data patterns 
 * signifies missing and - is not missing

Varlist order: drinkd_e

    Missing |
    pattern |      Freq.     Percent        Cum.
------------+-----------------------------------
          * |     27,968       35.74       35.74
          - |     50,287       64.26      100.00
------------+-----------------------------------
      Total |     78,255      100.00
WARNING: When the <command> option is not selected 
then no analysis is performed on the imputed datasets


. * Load in imputed dataset
. use ELSA_drinkd_e_imp1.dta, clear

. 
. * Now impute lag of educ and drinkd_e
. replace l2educ = educ
(29,030 real changes made)

. replace l2drinkd_e = drinkd_e
(60,893 real changes made)

. 
. /*
> * Impute BMI data using hotdeck method TODO
> codebook bmi
> 
> mi set mlong
> 
> mi register imputed bmi
> 
> mi impute pmm bmi male age adlstat hsless college drink drinkd_e vgactx_e mda
> ctx_e ltactx_e, add(20) rseed(`seed') knn(5)
> 
> codebook bmi
> */
. 
. *save ../../../input_data/ELSA_long.dta, replace
. save $outdata/ELSA_long.dta, replace
file /home/ld-archer/Documents/E_FEM/trunk/input_data/ELSA_long.dta saved

. 
. capture log close

. 
end of do-file
